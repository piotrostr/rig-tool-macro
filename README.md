# rig-tool-macro

Rather than satisfy the rig `Tool` trait explicitly, you can annotate the tools
with the `#[tool]` attribute. This will automatically generate the `Tool`
implementation for you.

```rust
#[tool]
fn how_many_rs(s: String) -> anyhow::Result<usize> {
    Ok(s.chars()
        .filter(|c| *c == 'r' || *c == 'R')
        .collect::<Vec<_>>()
        .len())
}
```

and then call it:

```rust
#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let agent = providers::openai::Client::from_env()
        .agent(providers::openai::GPT_4O)
        .tool(HowManyRs) // <- generated by the macro
        .max_tokens(1024)

    let res = agent.prompt("how many Rs are in the word strawberry?").await?;
    println!("{}", res);

    Ok(())
}
```

The current limitation is nested/mixed struct inputs - while those kinda work,
in some cases it throws serde errors

A similar situation, would be with exotic types, like `Pubkey` or `Keypair`,
that are not serializable directly, however, the simple macro gets you far
